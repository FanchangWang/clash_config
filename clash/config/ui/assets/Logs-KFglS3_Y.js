import{u as W,d as t,ah as X,i as e,ai as P,F as x,X as Z,aj as J,ak as d,al as K,am as Q,L as w,an as q,ao as O,ap as B,$ as U,t as h,b as Y,v as ee,w as y,x as te,p as re,a6 as ae,M as I,ab as le,B as se,a1 as j,ac as ne,a9 as G,af as ie,ag as oe,j as ce}from"./index-D_FQwHPh.js";import{c as de,g as ue,a as ge,e as he,f as A,I as ve,h as fe,r as me}from"./index-mXEqueb9.js";import{C as M}from"./ConfigTitle-BqAXpw7p.js";var be=h('<div class="flex flex-col gap-4"><div><select class="select select-bordered w-full"></select></div><div><select class="select select-bordered w-full"></select></div><div><select class="select select-bordered w-full">'),k=h("<option>");const pe=v=>{const[l]=W();return t(U,{ref:i=>{var o;return(o=v.ref)==null?void 0:o.call(v,i)},get icon(){return t(X,{size:24})},get title(){return l("logsSettings")},get children(){var i=be(),o=i.firstChild,c=o.firstChild,$=o.nextSibling,p=$.firstChild,C=$.nextSibling,f=C.firstChild;return e(o,t(M,{withDivider:!0,get children(){return l("tableSize")}}),c),c.addEventListener("change",r=>P(r.target.value)),e(c,t(x,{get each(){return Object.values(Z)},children:r=>(()=>{var s=k();return s.value=r,e(s,()=>l(r)),s})()})),e($,t(M,{withDivider:!0,get children(){return l("logLevel")}}),p),p.addEventListener("change",r=>J(r.target.value)),e(p,t(x,{get each(){return[d.Info,d.Error,d.Warning,d.Debug,d.Silent]},children:r=>(()=>{var s=k();return s.value=r,e(s,()=>l(r)),s})()})),e(C,t(M,{withDivider:!0,get children(){return l("logMaxRows")}}),f),f.addEventListener("change",r=>K(parseInt(r.target.value))),e(f,t(x,{each:Q,children:r=>(()=>{var s=k();return s.value=r,e(s,r),s})()})),w(()=>c.value=q()),w(()=>p.value=O()),w(()=>f.value=B()),i}})};var $e=h("<span>"),_e=h('<div class="flex h-full flex-col gap-2"><div class="join w-full"><input type=search class="input input-sm join-item input-primary flex-1 flex-shrink-0 sm:input-md"></div><div class="overflow-x-auto whitespace-nowrap rounded-md bg-base-300"><table><thead class="sticky top-0 z-10"></thead><tbody>'),Se=h("<tr>"),xe=h('<th class=bg-base-200><div class="flex items-center"><div>'),we=h('<tr class="hover:!bg-primary hover:text-primary-content">'),Ce=h("<td class=py-2>");const N=(v,l,i,o)=>{const c=me(v.getValue(l),i);return o({itemRank:c}),c.passed},Ie=()=>{const v=Y();if(!ee())return v("/setup",{replace:!0}),null;let l;const[i]=W();let o=1;const[c,$]=y([]),p=te("logs",{level:O()});re(()=>{const a=p();a&&($(m=>[{...a,seq:o},...m].slice(0,B())),o++)});const[C,f]=y(""),[r,s]=ae(y([]),{name:"logsTableSorting",storage:localStorage}),V=[{header:i("sequence"),accessorFn:a=>a.seq},{header:i("type"),accessorFn:a=>a.type,cell:({row:a})=>{const m=a.original.type;let u="";switch(m){case d.Error:u="text-error";break;case d.Warning:u="text-warning";break;case d.Info:u="text-info";break;case d.Debug:u="text-success";break}return(()=>{var _=$e();return I(_,u),e(_,()=>`[${a.original.type}]`),_})()}},{header:i("payload"),accessorFn:a=>a.payload}],R=de({filterFns:{fuzzy:N},state:{get globalFilter(){return C()},get sorting(){return r()}},get data(){return c()},sortDescFirst:!0,columns:V,onGlobalFilterChange:f,onSortingChange:s,globalFilterFn:N,getFilteredRowModel:ue(),getSortedRowModel:ge(),getCoreRowModel:he()});return(()=>{var a=_e(),m=a.firstChild,u=m.firstChild,_=m.nextSibling,E=_.firstChild,D=E.firstChild,H=D.nextSibling;return u.$$input=n=>f(n.target.value),e(m,t(se,{class:"join-item btn-sm sm:btn-md",onClick:()=>l==null?void 0:l.showModal(),get icon(){return t(le,{})}}),null),e(D,t(j,{get each(){return R.getHeaderGroups()},children:n=>{const b=n();return(()=>{var g=Se();return e(g,t(j,{get each(){return b.headers},children:L=>{const S=L();return(()=>{var z=xe(),T=z.firstChild,F=T.firstChild;return ne(F,"click",S.column.getToggleSortingHandler(),!0),e(F,()=>A(S.column.columnDef.header,S.getContext())),e(T,()=>({asc:t(ve,{}),desc:t(fe,{})})[S.column.getIsSorted()]??null,null),w(()=>I(F,G(S.column.getCanSort()&&"cursor-pointer select-none","flex-1"))),z})()}})),g})()}})),e(H,t(x,{get each(){return R.getRowModel().rows},children:n=>(()=>{var b=we();return e(b,t(x,{get each(){return n.getVisibleCells()},children:g=>(()=>{var L=Ce();return e(L,()=>A(g.column.columnDef.cell,g.getContext())),L})()})),b})()})),e(a,t(pe,{ref:n=>l=n}),null),w(n=>{var b=i("search"),g=G(ie(q()),"table relative rounded-none");return b!==n.e&&oe(u,"placeholder",n.e=b),g!==n.t&&I(E,n.t=g),n},{e:void 0,t:void 0}),a})()};ce(["input","click"]);export{Ie as default};
