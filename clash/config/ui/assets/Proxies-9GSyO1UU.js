import{c as e,H as fe,i as t,A as $,F as U,b as f,d as h,at as xe,au as re,S as R,t as A,g as V,D as $e,h as le,q as pe,Y as be,a4 as _e,k as ye,av as ie,M as we,Q as ae,e as Ce}from"./vendor-LFOJg3vZ.js";import{u as q,J as Pe,K as Se,N as Te,O as Le,P as Ne,Q as Ee,R as Ie,S as De,U as Me,V as H,W as ke,X as Oe,Y as Ae,Z as Ue,_ as Z,$ as ve,a0 as G,a1 as W,M as Fe,a2 as I,a3 as he,a4 as ee,B as Q,a5 as je,a6 as ce,a7 as oe,a8 as de}from"./index-QJLdVa23.js";import{f as Be}from"./global-Epb9UJLf.js";import{C as O}from"./ConfigTitle-hXjZ_Yxi.js";const Re=h('<div class="flex flex-col gap-4"><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><input type=number class="input input-bordered w-full"></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><select class="select select-bordered w-full"></select></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><select class="select select-bordered w-full">'),He=h('<option class="flex items-center gap-2">'),Ye=h("<option>"),Qe=n=>{const[r]=q();return e(Fe,{ref:s=>{var i;return(i=n.ref)==null?void 0:i.call(n,s)},get icon(){return e(fe,{size:24})},get title(){return r("proxiesSettings")},get children(){const s=Re(),i=s.firstChild,o=i.firstChild,d=o.firstChild,m=i.nextSibling,w=m.firstChild,u=m.nextSibling,D=u.firstChild,x=u.nextSibling,S=x.firstChild,p=x.nextSibling,C=p.firstChild,g=p.nextSibling,T=g.firstChild,L=T.firstChild,P=g.nextSibling,M=P.firstChild,X=M.firstChild,z=P.nextSibling,B=z.firstChild;return t(i,e(O,{withDivider:!0,get children(){return r("autoCloseConns")}}),o),d.addEventListener("change",c=>Pe(c.target.checked)),t(m,e(O,{withDivider:!0,get children(){return r("urlForLatencyTest")}}),w),w.addEventListener("change",c=>Se(c.target.value)),t(u,e(O,{withDivider:!0,get children(){return[$(()=>r("latencyTestTimeoutDuration"))," (",$(()=>r("ms")),")"]}}),D),D.addEventListener("change",c=>Te(Number(c.target.value))),t(x,e(O,{withDivider:!0,get children(){return r("urlForIPv6SupportTest")}}),S),S.addEventListener("change",c=>{var b;return Le((b=c.target.value)==null?void 0:b.trim())}),t(p,e(O,{withDivider:!0,get children(){return r("proxiesSorting")}}),C),C.addEventListener("change",c=>Ne(c.target.value)),t(C,e(U,{get each(){return Object.values(Ee)},children:c=>(()=>{const b=He();return b.value=c,t(b,()=>r(c)),b})()})),t(g,e(O,{withDivider:!0,get children(){return r("hideUnAvailableProxies")}}),T),L.addEventListener("change",c=>Ie(c.target.checked)),t(P,e(O,{withDivider:!0,get children(){return r("renderInTwoColumns")}}),M),X.addEventListener("change",c=>De(c.target.checked)),t(z,e(O,{withDivider:!0,get children(){return r("proxiesPreviewType")}}),B),B.addEventListener("change",c=>Me(c.target.value)),t(B,e(U,{get each(){return Object.values(H)},children:c=>(()=>{const b=Ye();return b.value=c,t(b,()=>r(c)),b})()})),f(()=>d.checked=ke()),f(()=>w.value=Oe()),f(()=>D.value=Ae()),f(()=>S.value=Ue()),f(()=>C.value=Z()),f(()=>L.checked=ve()),f(()=>X.checked=G()),f(()=>B.value=W()),s}})},ue=n=>{const r=()=>W()===H.OFF,s=$(()=>n.proxyNameList.length<=10),i=$(()=>{const d=W();return d===H.BAR||d===H.Auto&&!s()}),o=$(()=>{const d=W();return d===H.DOTS||d===H.Auto&&s()});return e(R,{get when(){return!r()},get children(){return e(xe,{get children(){return[e(re,{get when(){return i()},get children(){return e(ze,{get proxyNameList(){return n.proxyNameList},get now(){return n.now}})}}),e(re,{get when(){return o()},get children(){return e(Je,{get proxyNameList(){return n.proxyNameList},get now(){return n.now}})}})]}})}})},Xe=h('<div class="flex items-center gap-2 py-2"><div class="my-2 flex flex-1 items-center justify-center overflow-hidden rounded-2xl [&amp;>*]:h-2"><div class=bg-success></div><div class=bg-warning></div><div class=bg-error></div><div class=bg-neutral>'),ze=n=>{const{latencyMap:r}=ee(),s=$(()=>n.proxyNameList.map(u=>r()[u])),i=$(()=>s().length),o=$(()=>s().filter(u=>u>I().NOT_CONNECTED&&u<=I().MEDIUM).length),d=$(()=>s().filter(u=>u>I().MEDIUM&&u<=I().HIGH).length),m=$(()=>s().filter(u=>u>I().HIGH).length),w=$(()=>s().filter(u=>u===I().NOT_CONNECTED).length);return(()=>{const u=Xe(),D=u.firstChild,x=D.firstChild,S=x.nextSibling,p=S.nextSibling,C=p.nextSibling;return t(u,e(he,{get name(){return n.now}}),null),f(g=>{const T=`${o()*100/i()}%`,L=`${d()*100/i()}%`,P=`${m()*100/i()}%`,M=`${w()*100/i()}%`;return T!==g._v$&&((g._v$=T)!=null?x.style.setProperty("width",T):x.style.removeProperty("width")),L!==g._v$2&&((g._v$2=L)!=null?S.style.setProperty("width",L):S.style.removeProperty("width")),P!==g._v$3&&((g._v$3=P)!=null?p.style.setProperty("width",P):p.style.removeProperty("width")),M!==g._v$4&&((g._v$4=M)!=null?C.style.setProperty("width",M):C.style.removeProperty("width")),g},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),u})()},Ve=h("<div>"),We=h('<div class="flex items-center gap-2 py-2"><div class="flex flex-1 flex-wrap items-center gap-1">'),qe=n=>{let r=n.selected?"bg-white border-4 border-success":"bg-success";return typeof n.latency!="number"||n.latency===I().NOT_CONNECTED?r=n.selected?"bg-white border-4 border-neutral":"bg-neutral":n.latency>I().HIGH?r=n.selected?"bg-white border-4 border-error":"bg-error":n.latency>I().MEDIUM&&(r=n.selected?"bg-white border-4 border-warning":"bg-warning"),(()=>{const s=Ve();return f(i=>{const o=A("h-4 w-4 rounded-full",r),d=n.name;return o!==i._v$&&V(s,i._v$=o),d!==i._v$2&&$e(s,"title",i._v$2=d),i},{_v$:void 0,_v$2:void 0}),s})()},Je=n=>{const{latencyMap:r}=ee();return(()=>{const s=We(),i=s.firstChild;return t(i,e(U,{get each(){return n.proxyNameList.map(o=>[o,r()[o]])},children:([o,d])=>{const m=n.now===o;return e(qe,{name:o,latency:d,selected:m})}})),t(s,e(he,{get name(){return n.now}}),null),s})()},Ke=h("<progress class=progress max=100>"),Ze=h('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),Ge=h('<div class="text-sm text-slate-500">: '),et=n=>{const{Download:r=0,Upload:s=0,Total:i=0,Expire:o=0}=n,d=le(i,{units:"iec"}),m=le(r+s,{units:"iec"}),w=pe.toFinite(((r+s)/i*100).toFixed(2));return{total:d,used:m,percentage:w,expirePrefix:()=>{const[x]=q();return x("expire")},expireStr:()=>{const[x]=q();return o===0?x("noExpire"):be(o*1e3).format("YYYY-MM-DD")}}},tt=n=>{if(!n.subscriptionInfo)return;const r=et(n.subscriptionInfo);return[(()=>{const s=Ke();return f(()=>s.value=r.percentage),s})(),(()=>{const s=Ze(),i=s.firstChild,o=i.nextSibling,d=o.nextSibling,m=d.nextSibling;return m.nextSibling,t(s,()=>`${r.used}`,i),t(s,()=>`${r.total}`,o),t(s,()=>r.percentage,m),s})(),(()=>{const s=Ge(),i=s.firstChild;return t(s,()=>r.expirePrefix(),i),t(s,()=>r.expireStr(),null),s})()]},ge=h("<div>"),nt=h('<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class="tabs-boxed tabs gap-2"></div><div class=ml-auto></div></div><div class="flex-1 overflow-y-auto">'),st=h('<button><span></span><div class="badge badge-sm">'),rt=h('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm">'),lt=h('<div class="text-sm text-slate-500"> '),it=h('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">'),at=h('<div class="text-sm text-slate-500"> :: <!> ');var j=function(n){return n.proxyProviders="proxyProviders",n.proxies="proxies",n}(j||{});const gt=()=>{let n;const[r]=q(),{fetchProxies:s,proxies:i,selectProxyInGroup:o,latencyMap:d,proxyGroupNames:m,proxyProviders:w,updateProviderByProviderName:u,updateAllProvider:D,proxyGroupLatencyTest:x,proxyProviderLatencyTest:S,collapsedMap:p,setCollapsedMap:C,proxyGroupLatencyTestingMap:g,proxyProviderLatencyTestingMap:T,isAllProviderUpdating:L,updatingMap:P}=ee();_e(s);const M=async(_,N)=>{_.stopPropagation(),x(N)},X=(_,N)=>{_.stopPropagation(),S(N)},z=(_,N)=>{_.stopPropagation(),u(N)},B=async _=>{_.stopPropagation(),D()},[c,b]=ye(j.proxies),me=()=>[{type:j.proxies,name:r("proxies"),count:i().length},{type:j.proxyProviders,name:r("proxyProviders"),count:w().length}];return(()=>{const _=nt(),N=_.firstChild,te=N.firstChild,ne=te.nextSibling,se=N.nextSibling;return t(te,e(U,{get each(){return me()},children:v=>(()=>{const l=st(),k=l.firstChild,Y=k.nextSibling;return l.$$click=()=>b(v.type),t(k,()=>v.name),t(Y,()=>v.count),f(()=>V(l,A(c()===v.type&&"tab-active","tab tab-sm gap-2 px-2 sm:tab-md"))),l})()})),t(N,e(R,{get when(){return c()===j.proxyProviders},get children(){return e(Q,{class:"btn btn-circle btn-sm",get disabled(){return L()},onClick:v=>B(v),get icon(){return e(ie,{get class(){return A(L()&&"animate-spin text-success")}})}})}}),ne),t(ne,e(Q,{class:"btn-circle btn-sm sm:btn-md",onClick:()=>n==null?void 0:n.showModal(),get icon(){return e(we,{})}})),t(se,e(R,{get when(){return c()===j.proxies},get children(){const v=ge();return t(v,e(U,{get each(){return i()},children:l=>{const k=$(()=>je(ce(l.all??[],d(),Z(),m()),d(),m(),ve())),Y=[(()=>{const a=rt(),E=a.firstChild,y=E.firstChild,J=y.nextSibling;return t(y,()=>l.name),t(J,()=>{var F;return(F=l.all)==null?void 0:F.length}),t(a,e(Q,{class:"btn-circle btn-sm",get disabled(){return g()[l.name]},onClick:F=>M(F,l.name),get icon(){return e(ae,{get class(){return A(g()[l.name]&&"animate-pulse text-success")}})}}),null),a})(),(()=>{const a=lt(),E=a.firstChild;return t(a,()=>l.type,E),t(a,()=>{var y;return((y=l.now)==null?void 0:y.length)>0&&` :: ${l.now}`},null),a})(),e(R,{get when(){return!p()[l.name]},get children(){return e(ue,{get proxyNameList(){return k()},get now(){return l.now}})}})];return e(oe,{get isOpen(){return p()[l.name]},title:Y,onCollapse:a=>C(l.name,a),get children(){return e(U,{get each(){return k()},children:a=>e(de,{proxyName:a,get isSelected(){return l.now===a},onClick:()=>void o(l,a)})})}})}})),f(()=>V(v,A("grid grid-cols-1 place-items-start gap-2",G()?"sm:grid-cols-2":"sm:grid-cols-1"))),v}}),null),t(se,e(R,{get when(){return c()===j.proxyProviders},get children(){const v=ge();return t(v,e(U,{get each(){return w()},children:l=>{const k=$(()=>ce(l.proxies.map(a=>a.name)??[],d(),Z(),void 0)),Y=[(()=>{const a=it(),E=a.firstChild,y=E.firstChild,J=y.nextSibling,F=E.nextSibling;return t(y,()=>l.name),t(J,()=>l.proxies.length),t(F,e(Q,{class:"btn btn-circle btn-sm",get disabled(){return P()[l.name]},onClick:K=>z(K,l.name),get icon(){return e(ie,{get class(){return A(P()[l.name]&&"animate-spin text-success")}})}}),null),t(F,e(Q,{class:"btn btn-circle btn-sm",get disabled(){return T()[l.name]},onClick:K=>X(K,l.name),get icon(){return e(ae,{get class(){return A(T()[l.name]&&"animate-pulse text-success")}})}}),null),a})(),e(tt,{get subscriptionInfo(){return l.subscriptionInfo}}),(()=>{const a=at(),E=a.firstChild,y=E.nextSibling;return y.nextSibling,t(a,()=>l.vehicleType,E),t(a,()=>r("updated"),y),t(a,()=>Be(l.updatedAt),null),a})(),e(R,{get when(){return!p()[l.name]},get children(){return e(ue,{get proxyNameList(){return k()}})}})];return e(oe,{get isOpen(){return p()[l.name]},title:Y,onCollapse:a=>C(l.name,a),get children(){return e(U,{get each(){return k()},children:a=>e(de,{proxyName:a})})}})}})),f(()=>V(v,A("grid grid-cols-1 place-items-start gap-2",G()?"sm:grid-cols-2":"sm:grid-cols-1"))),v}}),null),t(_,e(Qe,{ref:v=>n=v}),null),_})()};Ce(["click"]);export{gt as default};
